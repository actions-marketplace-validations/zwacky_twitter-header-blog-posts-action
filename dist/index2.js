var e=require("https"),t=require("url"),r=require("fs"),n=require("os"),o=require("path"),s=require("http");require("net");var i=require("tls"),a=require("events");require("assert");var u=require("util"),l=require("crypto"),c=require("stream"),d=require("zlib"),h=require("querystring");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=p(e),m=p(t),g=p(r),y=p(n),b=p(o),v=p(s),w=p(i),O=p(a),_=p(u),T=p(l),E=p(c),A=p(d),x=p(h),C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function S(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var P={},N={},k={};!function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+t+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",n=new RegExp("^"+r+"$");e.isExist=function(e){return void 0!==e},e.isEmptyObject=function(e){return 0===Object.keys(e).length},e.merge=function(e,t,r){if(t){const n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)e[n[s]]="strict"===r?[t[n[s]]]:t[n[s]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(e,t,r){let n={};if(!e)return t;for(let o=0;o<r.length;o++)void 0!==e[r[o]]?n[r[o]]=e[r[o]]:n[r[o]]=t[r[o]];return n},e.isTagNameInArrayMode=function(e,t,r){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,r):"strict"===t)},e.isName=function(e){const t=n.exec(e);return!(null==t)},e.getAllMatches=function(e,t){const r=[];let n=t.exec(e);for(;n;){const o=[];o.startIndex=t.lastIndex-n[0].length;const s=n.length;for(let e=0;e<s;e++)o.push(n[e]);r.push(o),n=t.exec(e)}return r},e.nameRegexp=r}(k);const j=k,R=function(e,t,r){const n={};if(!t.alwaysCreateTextNode&&(!e.child||j.isEmptyObject(e.child))&&(!e.attrsMap||j.isEmptyObject(e.attrsMap)))return j.isExist(e.val)?e.val:"";if(j.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const o=j.isTagNameInArrayMode(e.tagname,t.arrayMode,r);n[t.textNodeName]=o?[e.val]:e.val}j.merge(n,e.attrsMap,t.arrayMode);const o=Object.keys(e.child);for(let s=0;s<o.length;s++){const i=o[s];if(e.child[i]&&e.child[i].length>1){n[i]=[];for(let r in e.child[i])e.child[i].hasOwnProperty(r)&&n[i].push(R(e.child[i][r],t,i))}else{const o=R(e.child[i][0],t,i),s=!0===t.arrayMode&&"object"==typeof o||j.isTagNameInArrayMode(i,t.arrayMode,r);n[i]=s?[o]:o}}return n};N.convertToJson=R;var q={};const I=/^[-+]?0x[a-fA-F0-9]+$/,B=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/,D={hex:!0,leadingZeros:!0,decimalPoint:"."};const U=k,M=k.buildOptions,L=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}},F=function(e,t={}){if(t=Object.assign({},D,t),!e||"string"!=typeof e)return e;let r=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(r))return e;if(t.hex&&I.test(r))return Number.parseInt(r,16);{const n=B.exec(r);if(n){n[1];const o=n[2],s=n[3];return n[4]||n[6],1===o.length&&"."===s[0]?Number(e):!t.leadingZeros&&o.length>0?e:Number(r)}return e}};"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,U.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const H={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[],alwaysCreateTextNode:!1};q.defaultOptions=H;const $=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];function V(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=G(t=r.tagValueProcessor(t,e),r.parseNodeValue,r.numParseOptions)),t}function z(e,t){if(t.ignoreNameSpace){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}function G(e,t,r){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&F(e,r)}return U.isExist(e)?e:""}q.props=$;const J=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function K(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const r=U.getAllMatches(e,J),n=r.length,o={};for(let e=0;e<n;e++){const n=z(r[e][1],t);n.length&&(void 0!==r[e][4]?(t.trimValues&&(r[e][4]=r[e][4].trim()),r[e][4]=t.attrValueProcessor(r[e][4],n),o[t.attributeNamePrefix+n]=G(r[e][4],t.parseAttributeValue,t.numParseOptions)):t.allowBooleanAttributes&&(o[t.attributeNamePrefix+n]=!0))}if(!Object.keys(o).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=o,e}return o}}function W(e,t){let r,n="";for(let o=t;o<e.length;o++){let t=e[o];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else{if(">"===t)return{data:n,index:o};"\t"===t&&(t=" ")}n+=t}}function X(e,t,r,n){const o=e.indexOf(t,r);if(-1===o)throw new Error(n);return o+t.length-1}q.getTraversalObj=function(e,t){e=e.replace(/\r\n?/g,"\n"),t=M(t,H,$);const r=new L("!xml");let n=r,o="";for(let r=0;r<e.length;r++){if("<"===e[r])if("/"===e[r+1]){const s=X(e,">",r,"Closing Tag is not closed.");let i=e.substring(r+2,s).trim();if(t.ignoreNameSpace){const e=i.indexOf(":");-1!==e&&(i=i.substr(e+1))}n&&(n.val?n.val=U.getValue(n.val)+""+V(i,o,t):n.val=V(i,o,t)),t.stopNodes.length&&t.stopNodes.includes(n.tagname)&&(n.child=[],null==n.attrsMap&&(n.attrsMap={}),n.val=e.substr(n.startIndex+1,r-n.startIndex-1)),n=n.parent,o="",r=s}else if("?"===e[r+1])r=X(e,"?>",r,"Pi Tag is not closed.");else if("!--"===e.substr(r+1,3))r=X(e,"--\x3e",r,"Comment is not closed.");else if("!D"===e.substr(r+1,2)){const t=X(e,">",r,"DOCTYPE is not closed.");r=e.substring(r,t).indexOf("[")>=0?e.indexOf("]>",r)+1:t}else if("!["===e.substr(r+1,2)){const s=X(e,"]]>",r,"CDATA is not closed.")-2,i=e.substring(r+9,s);if(o&&(n.val=U.getValue(n.val)+""+V(n.tagname,o,t),o=""),t.cdataTagName){const e=new L(t.cdataTagName,n,i);n.addChild(e),n.val=U.getValue(n.val)+t.cdataPositionChar,i&&(e.val=i)}else n.val=(n.val||"")+(i||"");r=s+2}else{const s=W(e,r+1);let i=s.data;const a=s.index,u=i.indexOf(" ");let l=i,c=!0;if(-1!==u&&(l=i.substr(0,u).replace(/\s\s*$/,""),i=i.substr(u+1)),t.ignoreNameSpace){const e=l.indexOf(":");-1!==e&&(l=l.substr(e+1),c=l!==s.data.substr(e+1))}if(n&&o&&"!xml"!==n.tagname&&(n.val=U.getValue(n.val)+""+V(n.tagname,o,t)),i.length>0&&i.lastIndexOf("/")===i.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),i=l):i=i.substr(0,i.length-1);const e=new L(l,n,"");l!==i&&(e.attrsMap=K(i,t)),n.addChild(e)}else{const e=new L(l,n);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=a),l!==i&&c&&(e.attrsMap=K(i,t)),n.addChild(e),n=e}o="",r=a}else o+=e[r]}return r};var Y={};const Z=k,Q={allowBooleanAttributes:!1},ee=["allowBooleanAttributes"];function te(e,t){const r=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const n=e.substr(r,t-r);if(t>5&&"xml"===n)return ae("InvalidXml","XML declaration allowed only at the start of the document.",le(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function re(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}Y.validate=function(e,t){t=Z.buildOptions(t,Q,ee);const r=[];let n=!1,o=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++)if("<"===e[i]&&"?"===e[i+1]){if(i+=2,i=te(e,i),i.err)return i}else{if("<"!==e[i]){if(" "===e[i]||"\t"===e[i]||"\n"===e[i]||"\r"===e[i])continue;return ae("InvalidChar","char '"+e[i]+"' is not expected.",le(e,i))}{let a=i;if(i++,"!"===e[i]){i=re(e,i);continue}{let u=!1;"/"===e[i]&&(u=!0,i++);let l="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)l+=e[i];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),i--),s=l,!Z.isName(s)){let t;return t=0===l.trim().length?"Invalid space after '<'.":"Tag '"+l+"' is an invalid name.",ae("InvalidTag",t,le(e,i))}const c=ne(e,i);if(!1===c)return ae("InvalidAttr","Attributes for '"+l+"' have open quote.",le(e,i));let d=c.value;if(i=c.index,"/"===d[d.length-1]){const r=i-d.length;d=d.substring(0,d.length-1);const o=se(d,t);if(!0!==o)return ae(o.err.code,o.err.msg,le(e,r+o.err.line));n=!0}else if(u){if(!c.tagClosed)return ae("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",le(e,i));if(d.trim().length>0)return ae("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",le(e,a));{const t=r.pop();if(l!==t.tagName){let r=le(e,t.tagStartPos);return ae("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+l+"'.",le(e,a))}0==r.length&&(o=!0)}}else{const s=se(d,t);if(!0!==s)return ae(s.err.code,s.err.msg,le(e,i-d.length+s.err.line));if(!0===o)return ae("InvalidXml","Multiple possible root nodes found.",le(e,i));r.push({tagName:l,tagStartPos:a}),n=!0}for(i++;i<e.length;i++)if("<"===e[i]){if("!"===e[i+1]){i++,i=re(e,i);continue}if("?"!==e[i+1])break;if(i=te(e,++i),i.err)return i}else if("&"===e[i]){const t=ie(e,i);if(-1==t)return ae("InvalidChar","char '&' is not expected.",le(e,i));i=t}"<"===e[i]&&i--}}}var s;return n?1==r.length?ae("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",le(e,r[0].tagStartPos)):!(r.length>0)||ae("InvalidXml","Invalid '"+JSON.stringify(r.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):ae("InvalidXml","Start tag expected.",1)};function ne(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===n?n=e[t]:n!==e[t]||(n="");else if(">"===e[t]&&""===n){o=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:o}}const oe=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function se(e,t){const r=Z.getAllMatches(e,oe),n={};for(let e=0;e<r.length;e++){if(0===r[e][1].length)return ae("InvalidAttr","Attribute '"+r[e][2]+"' has no space in starting.",ce(r[e]));if(void 0===r[e][3]&&!t.allowBooleanAttributes)return ae("InvalidAttr","boolean attribute '"+r[e][2]+"' is not allowed.",ce(r[e]));const o=r[e][2];if(!ue(o))return ae("InvalidAttr","Attribute '"+o+"' is an invalid name.",ce(r[e]));if(n.hasOwnProperty(o))return ae("InvalidAttr","Attribute '"+o+"' is repeated.",ce(r[e]));n[o]=1}return!0}function ie(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function ae(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function ue(e){return Z.isName(e)}function le(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function ce(e){return e.startIndex+e[1].length}var de={};const he=function(e){return String.fromCharCode(e)},pe={nilChar:he(176),missingChar:he(201),nilPremitive:he(175),missingPremitive:he(200),emptyChar:he(178),emptyValue:he(177),boundryChar:he(179),objStart:he(198),arrStart:he(204),arrayEnd:he(185)},fe=[pe.nilChar,pe.nilPremitive,pe.missingChar,pe.missingPremitive,pe.boundryChar,pe.emptyChar,pe.emptyValue,pe.arrayEnd,pe.objStart,pe.arrStart],me=function(e,t,r){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?ge(e[0].val):ge(e);{const o=void 0===(n=e)?pe.missingChar:null===n?pe.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||pe.emptyChar;if(!0===o){let n="";if(Array.isArray(t)){n+=pe.arrStart;const o=t[0],s=e.length;if("string"==typeof o)for(let t=0;t<s;t++){const r=ge(e[t].val);n=ye(n,r)}else for(let t=0;t<s;t++){const s=me(e[t],o,r);n=ye(n,s)}n+=pe.arrayEnd}else{n+=pe.objStart;const o=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let s in o){const i=o[s];let a;a=!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[i]?me(e.attrsMap[i],t[i],r):i===r.textNodeName?me(e.val,t[i],r):me(e.child[i],t[i],r),n=ye(n,a)}}return n}return o}var n},ge=function(e){switch(e){case void 0:return pe.missingPremitive;case null:return pe.nilPremitive;case"":return pe.emptyValue;default:return e}},ye=function(e,t){return be(t[0])||be(e[e.length-1])||(e+=pe.boundryChar),e+t},be=function(e){return-1!==fe.indexOf(e)};const ve=q,we=k.buildOptions;de.convert2nimn=function(e,t,r){return r=we(r,ve.defaultOptions,ve.props),me(e,t,r)};var Oe={};const _e=k,Te=k.buildOptions,Ee=q,Ae=function(e,t,r){let n="{";const o=Object.keys(e.child);for(let r=0;r<o.length;r++){const s=o[r];if(e.child[s]&&e.child[s].length>1){n+='"'+s+'" : [ ';for(let r in e.child[s])n+=Ae(e.child[s][r],t)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+s+'" : '+Ae(e.child[s][0],t)+" ,"}return _e.merge(n,e.attrsMap),_e.isEmptyObject(n)?_e.isExist(e.val)?e.val:"":(_e.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(n+='"'+t.textNodeName+'" : '+(!0!==(s=e.val)&&!1!==s&&isNaN(s)?'"'+s+'"':s)),","===n[n.length-1]&&(n=n.substr(0,n.length-2)),n+"}");var s};Oe.convertToJsonString=function(e,t){return(t=Te(t,Ee.defaultOptions,Ee.props)).indentBy=t.indentBy||"",Ae(e,t)};const xe=k.buildOptions,Ce={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},Se=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function Pe(e){this.options=xe(e,Ce,Se),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ue),this.options.cdataTagName?this.isCDATA=Me:this.isCDATA=function(){return!1},this.replaceCDATAstr=ke,this.replaceCDATAarr=je,this.processTextOrObjNode=Ne,this.options.format?(this.indentate=De,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=Be,this.buildObjNode=qe):(this.buildTextNode=Ie,this.buildObjNode=Re),this.buildTextValNode=Ie,this.buildObjectNode=Re}function Ne(e,t,r){const n=this.j2x(e,r+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextNode(n.val,t,n.attrStr,r):this.buildObjNode(n.val,t,n.attrStr,r)}function ke(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function je(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[r]+"]]>");return e+this.newLine}function Re(e,t,r,n){return r&&-1===e.indexOf("<")?this.indentate(n)+"<"+t+r+">"+e+"</"+t+this.tagEndChar:this.indentate(n)+"<"+t+r+this.tagEndChar+e+this.indentate(n)+"</"+t+this.tagEndChar}function qe(e,t,r,n){return""!==e?this.buildObjectNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function Ie(e,t,r,n){return this.indentate(n)+"<"+t+r+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function Be(e,t,r,n){return""!==e?this.buildTextValNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function De(e){return this.options.indentBy.repeat(e)}function Ue(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function Me(e){return e===this.options.cdataTagName}Pe.prototype.parse=function(e){return Array.isArray(e)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(e={[this.options.rootNodeName]:e}),this.j2x(e,0).val},Pe.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(void 0===e[o]);else if(null===e[o])n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const s=this.isAttribute(o);s?r+=" "+s+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?n+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):n+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+e[o])):n+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))n+=this.indentate(t),e[this.options.textNodeName]?n+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):n+=this.replaceCDATAarr("",e[o]);else{const r=e[o].length;for(let s=0;s<r;s++){const r=e[o][s];void 0===r||(n+=null===r?this.indentate(t)+"<"+o+"/"+this.tagEndChar:"object"==typeof r?this.processTextOrObjNode(r,o,t):this.buildTextNode(r,o,"",t))}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),n=t.length;for(let s=0;s<n;s++)r+=" "+t[s]+'="'+this.options.attrValueProcessor(""+e[o][t[s]])+'"'}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};var Le=Pe;!function(e){const t=N,r=q,n=q,o=k.buildOptions,s=Y;e.parse=function(e,i={},a){if(a){!0===a&&(a={});const t=s.validate(e,a);if(!0!==t)throw Error(t.err.msg)}i.parseTrueNumberOnly&&!1!==i.parseNodeValue&&!i.numParseOptions&&(i.numParseOptions={leadingZeros:!1});let u=o(i,n.defaultOptions,n.props);const l=r.getTraversalObj(e,u);return t.convertToJson(l,u)},e.convertTonimn=de.convert2nimn,e.getTraversalObj=r.getTraversalObj,e.convertToJson=t.convertToJson,e.convertToJsonString=Oe.convertToJsonString,e.validate=s.validate,e.j2xParser=Le,e.parseToNimn=function(t,r,n){return e.convertTonimn(e.getTraversalObj(t,n),r,n)}}(P);var Fe={},He={},$e={};Object.defineProperty($e,"__esModule",{value:!0}),$e.toCommandProperties=$e.toCommandValue=void 0,$e.toCommandValue=function(e){return null==e?"":"string"==typeof e||e instanceof String?e:JSON.stringify(e)},$e.toCommandProperties=function(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}};var Ve=C&&C.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),ze=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ge=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&Ve(t,e,r);return ze(t,e),t};Object.defineProperty(He,"__esModule",{value:!0}),He.issue=He.issueCommand=void 0;const Je=Ge(y.default),Ke=$e;function We(e,t,r){const n=new Xe(e,t,r);process.stdout.write(n.toString()+Je.EOL)}He.issueCommand=We,He.issue=function(e,t=""){We(e,{},t)};class Xe{constructor(e,t,r){e||(e="missing.command"),this.command=e,this.properties=t,this.message=r}toString(){let e="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=!0;for(const r in this.properties)if(this.properties.hasOwnProperty(r)){const n=this.properties[r];n&&(t?t=!1:e+=",",e+=`${r}=${Ye(n)}`)}}return e+=`::${function(e){return Ke.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message)}`,e}}function Ye(e){return Ke.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}var Ze={},Qe=C&&C.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),et=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tt=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&Qe(t,e,r);return et(t,e),t};Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.issueCommand=void 0;const rt=tt(g.default),nt=tt(y.default),ot=$e;Ze.issueCommand=function(e,t){const r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!rt.existsSync(r))throw new Error(`Missing file at path: ${r}`);rt.appendFileSync(r,`${ot.toCommandValue(t)}${nt.EOL}`,{encoding:"utf8"})};var st,it={},at={},ut={};var lt,ct,dt,ht,pt={};function ft(){return dt||(dt=1,ct=function(){if(lt)return pt;lt=1;var e,t=w.default,r=v.default,n=f.default,o=O.default,s=_.default;function i(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||r.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",(function(e,r,n,o){for(var s=u(r,n,o),i=0,a=t.requests.length;i<a;++i){var l=t.requests[i];if(l.host===s.host&&l.port===s.port)return t.requests.splice(i,1),void l.request.onSocket(e)}e.destroy(),t.removeSocket(e)}))}function a(e,r){var n=this;i.prototype.createSocket.call(n,e,(function(o){var s=e.request.getHeader("host"),i=l({},n.options,{socket:o,servername:s?s.replace(/:.*$/,""):e.host}),a=t.connect(0,i);n.sockets[n.sockets.indexOf(o)]=a,r(a)}))}function u(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function l(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if("object"==typeof n)for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];void 0!==n[a]&&(e[a]=n[a])}}return e}return pt.httpOverHttp=function(e){var t=new i(e);return t.request=r.request,t},pt.httpsOverHttp=function(e){var t=new i(e);return t.request=r.request,t.createSocket=a,t.defaultPort=443,t},pt.httpOverHttps=function(e){var t=new i(e);return t.request=n.request,t},pt.httpsOverHttps=function(e){var t=new i(e);return t.request=n.request,t.createSocket=a,t.defaultPort=443,t},s.inherits(i,o.EventEmitter),i.prototype.addRequest=function(e,t,r,n){var o=this,s=l({request:e},o.options,u(t,r,n));o.sockets.length>=this.maxSockets?o.requests.push(s):o.createSocket(s,(function(t){function r(){o.emit("free",t,s)}function n(e){o.removeSocket(t),t.removeListener("free",r),t.removeListener("close",n),t.removeListener("agentRemove",n)}t.on("free",r),t.on("close",n),t.on("agentRemove",n),e.onSocket(t)}))},i.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=l({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),e("making CONNECT request");var i=n.request(s);function a(s,a,u){var l;return i.removeAllListeners(),a.removeAllListeners(),200!==s.statusCode?(e("tunneling socket could not be established, statusCode=%d",s.statusCode),a.destroy(),(l=new Error("tunneling socket could not be established, statusCode="+s.statusCode)).code="ECONNRESET",t.request.emit("error",l),void n.removeSocket(o)):u.length>0?(e("got illegal response body from proxy"),a.destroy(),(l=new Error("got illegal response body from proxy")).code="ECONNRESET",t.request.emit("error",l),void n.removeSocket(o)):(e("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=a,r(a))}i.useChunkedEncodingByDefault=!1,i.once("response",(function(e){e.upgrade=!0})),i.once("upgrade",(function(e,t,r){process.nextTick((function(){a(e,t,r)}))})),i.once("connect",a),i.once("error",(function(r){i.removeAllListeners(),e("tunneling socket could not be established, cause=%s\n",r.message,r.stack);var s=new Error("tunneling socket could not be established, cause="+r.message);s.code="ECONNRESET",t.request.emit("error",s),n.removeSocket(o)})),i.end()},i.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,(function(e){r.request.onSocket(e)}))}},e=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},pt.debug=e,pt}()),ct}function mt(){return ht||(ht=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=v.default,r=f.default,n=function(){if(st)return ut;function e(e){if(!e.hostname)return!1;let t,r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;e.port?t=Number(e.port):"http:"===e.protocol?t=80:"https:"===e.protocol&&(t=443);let n=[e.hostname.toUpperCase()];"number"==typeof t&&n.push(`${n[0]}:${t}`);for(let e of r.split(",").map((e=>e.trim().toUpperCase())).filter((e=>e)))if(n.some((t=>t===e)))return!0;return!1}return st=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.getProxyUrl=function(t){let r,n,o="https:"===t.protocol;return e(t)||(n=o?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY,n&&(r=new URL(n))),r},ut.checkBypass=e,ut}();let o;var s,i,a;!function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"}(s=e.HttpCodes||(e.HttpCodes={})),function(e){e.Accept="accept",e.ContentType="content-type"}(i=e.Headers||(e.Headers={})),function(e){e.ApplicationJson="application/json"}(a=e.MediaTypes||(e.MediaTypes={})),e.getProxyUrl=function(e){let t=n.getProxyUrl(new URL(e));return t?t.href:""};const u=[s.MovedPermanently,s.ResourceMoved,s.SeeOther,s.TemporaryRedirect,s.PermanentRedirect],l=[s.BadGateway,s.ServiceUnavailable,s.GatewayTimeout],c=["OPTIONS","GET","DELETE","HEAD"];class d extends Error{constructor(e,t){super(e),this.name="HttpClientError",this.statusCode=t,Object.setPrototypeOf(this,d.prototype)}}e.HttpClientError=d;class h{constructor(e){this.message=e}readBody(){return new Promise((async(e,t)=>{let r=Buffer.alloc(0);this.message.on("data",(e=>{r=Buffer.concat([r,e])})),this.message.on("end",(()=>{e(r.toString())}))}))}}e.HttpClientResponse=h,e.isHttps=function(e){return"https:"===new URL(e).protocol};class p{constructor(e,t,r){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=t||[],this.requestOptions=r,r&&(null!=r.ignoreSslError&&(this._ignoreSslError=r.ignoreSslError),this._socketTimeout=r.socketTimeout,null!=r.allowRedirects&&(this._allowRedirects=r.allowRedirects),null!=r.allowRedirectDowngrade&&(this._allowRedirectDowngrade=r.allowRedirectDowngrade),null!=r.maxRedirects&&(this._maxRedirects=Math.max(r.maxRedirects,0)),null!=r.keepAlive&&(this._keepAlive=r.keepAlive),null!=r.allowRetries&&(this._allowRetries=r.allowRetries),null!=r.maxRetries&&(this._maxRetries=r.maxRetries))}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,r){return this.request("POST",e,t,r||{})}patch(e,t,r){return this.request("PATCH",e,t,r||{})}put(e,t,r){return this.request("PUT",e,t,r||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,r,n){return this.request(e,t,r,n)}async getJson(e,t={}){t[i.Accept]=this._getExistingOrDefaultHeader(t,i.Accept,a.ApplicationJson);let r=await this.get(e,t);return this._processResponse(r,this.requestOptions)}async postJson(e,t,r={}){let n=JSON.stringify(t,null,2);r[i.Accept]=this._getExistingOrDefaultHeader(r,i.Accept,a.ApplicationJson),r[i.ContentType]=this._getExistingOrDefaultHeader(r,i.ContentType,a.ApplicationJson);let o=await this.post(e,n,r);return this._processResponse(o,this.requestOptions)}async putJson(e,t,r={}){let n=JSON.stringify(t,null,2);r[i.Accept]=this._getExistingOrDefaultHeader(r,i.Accept,a.ApplicationJson),r[i.ContentType]=this._getExistingOrDefaultHeader(r,i.ContentType,a.ApplicationJson);let o=await this.put(e,n,r);return this._processResponse(o,this.requestOptions)}async patchJson(e,t,r={}){let n=JSON.stringify(t,null,2);r[i.Accept]=this._getExistingOrDefaultHeader(r,i.Accept,a.ApplicationJson),r[i.ContentType]=this._getExistingOrDefaultHeader(r,i.ContentType,a.ApplicationJson);let o=await this.patch(e,n,r);return this._processResponse(o,this.requestOptions)}async request(e,t,r,n){if(this._disposed)throw new Error("Client has already been disposed.");let o,i=new URL(t),a=this._prepareRequest(e,i,n),d=this._allowRetries&&-1!=c.indexOf(e)?this._maxRetries+1:1,h=0;for(;h<d;){if(o=await this.requestRaw(a,r),o&&o.message&&o.message.statusCode===s.Unauthorized){let e;for(let t=0;t<this.handlers.length;t++)if(this.handlers[t].canHandleAuthentication(o)){e=this.handlers[t];break}return e?e.handleAuthentication(this,a,r):o}let t=this._maxRedirects;for(;-1!=u.indexOf(o.message.statusCode)&&this._allowRedirects&&t>0;){const s=o.message.headers.location;if(!s)break;let u=new URL(s);if("https:"==i.protocol&&i.protocol!=u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await o.readBody(),u.hostname!==i.hostname)for(let e in n)"authorization"===e.toLowerCase()&&delete n[e];a=this._prepareRequest(e,u,n),o=await this.requestRaw(a,r),t--}if(-1==l.indexOf(o.message.statusCode))return o;h+=1,h<d&&(await o.readBody(),await this._performExponentialBackoff(h))}return o}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return new Promise(((r,n)=>{this.requestRawWithCallback(e,t,(function(e,t){e&&n(e),r(t)}))}))}requestRawWithCallback(e,t,r){let n;"string"==typeof t&&(e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let o=!1,s=(e,t)=>{o||(o=!0,r(e,t))},i=e.httpModule.request(e.options,(e=>{let t=new h(e);s(null,t)}));i.on("socket",(e=>{n=e})),i.setTimeout(this._socketTimeout||18e4,(()=>{n&&n.end(),s(new Error("Request timeout: "+e.options.path),null)})),i.on("error",(function(e){s(e,null)})),t&&"string"==typeof t&&i.write(t,"utf8"),t&&"string"!=typeof t?(t.on("close",(function(){i.end()})),t.pipe(i)):i.end()}getAgent(e){let t=new URL(e);return this._getAgent(t)}_prepareRequest(e,n,o){const s={};s.parsedUrl=n;const i="https:"===s.parsedUrl.protocol;s.httpModule=i?r:t;const a=i?443:80;return s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):a,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=e,s.options.headers=this._mergeHeaders(o),null!=this.userAgent&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers&&this.handlers.forEach((e=>{e.prepareRequest(s.options)})),s}_mergeHeaders(e){const t=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},t(this.requestOptions.headers),t(e)):t(e||{})}_getExistingOrDefaultHeader(e,t,r){let n;var o;return this.requestOptions&&this.requestOptions.headers&&(n=(o=this.requestOptions.headers,Object.keys(o).reduce(((e,t)=>(e[t.toLowerCase()]=o[t],e)),{}))[t]),e[t]||n||r}_getAgent(e){let s,i=n.getProxyUrl(e),a=i&&i.hostname;if(this._keepAlive&&a&&(s=this._proxyAgent),this._keepAlive&&!a&&(s=this._agent),s)return s;const u="https:"===e.protocol;let l=100;if(this.requestOptions&&(l=this.requestOptions.maxSockets||t.globalAgent.maxSockets),a){o||(o=ft());const e={maxSockets:l,keepAlive:this._keepAlive,proxy:{...(i.username||i.password)&&{proxyAuth:`${i.username}:${i.password}`},host:i.hostname,port:i.port}};let t;const r="https:"===i.protocol;t=u?r?o.httpsOverHttps:o.httpsOverHttp:r?o.httpOverHttps:o.httpOverHttp,s=t(e),this._proxyAgent=s}if(this._keepAlive&&!s){const e={keepAlive:this._keepAlive,maxSockets:l};s=u?new r.Agent(e):new t.Agent(e),this._agent=s}return s||(s=u?r.globalAgent:t.globalAgent),u&&this._ignoreSslError&&(s.options=Object.assign(s.options||{},{rejectUnauthorized:!1})),s}_performExponentialBackoff(e){e=Math.min(10,e);const t=5*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}static dateTimeDeserializer(e,t){if("string"==typeof t){let e=new Date(t);if(!isNaN(e.valueOf()))return e}return t}async _processResponse(e,t){return new Promise((async(r,n)=>{const o=e.message.statusCode,i={statusCode:o,result:null,headers:{}};let a,u;o==s.NotFound&&r(i);try{u=await e.readBody(),u&&u.length>0&&(a=t&&t.deserializeDates?JSON.parse(u,p.dateTimeDeserializer):JSON.parse(u),i.result=a),i.headers=e.message.headers}catch(e){}if(o>299){let e;e=a&&a.message?a.message:u&&u.length>0?u:"Failed request: ("+o+")";let t=new d(e,o);t.result=i.result,n(t)}else r(i)}))}}e.HttpClient=p}(at)),at}var gt,yt,bt,vt={};function wt(){if(yt)return it;yt=1;var e=C&&C.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(it,"__esModule",{value:!0}),it.OidcClient=void 0;const t=mt(),r=(gt||(gt=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.BasicCredentialHandler=class{constructor(e,t){this.username=e,this.password=t}prepareRequest(e){e.headers.Authorization="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(e){return!1}handleAuthentication(e,t,r){return null}},vt.BearerCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){e.headers.Authorization="Bearer "+this.token}canHandleAuthentication(e){return!1}handleAuthentication(e,t,r){return null}},vt.PersonalAccessTokenCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){e.headers.Authorization="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(e){return!1}handleAuthentication(e,t,r){return null}}),vt),n=Ot();class o{static createHttpClient(e=!0,n=10){const s={allowRetries:e,maxRetries:n};return new t.HttpClient("actions/oidc-client",[new r.BearerCredentialHandler(o.getRequestToken())],s)}static getRequestToken(){const e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){const e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(t){var r;return e(this,void 0,void 0,(function*(){const e=o.createHttpClient(),n=yield e.getJson(t).catch((e=>{throw new Error(`Failed to get ID Token. \n \n\t        Error Code : ${e.statusCode}\n \n\t        Error Message: ${e.result.message}`)})),s=null===(r=n.result)||void 0===r?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s}))}static getIDToken(t){return e(this,void 0,void 0,(function*(){try{let e=o.getIDTokenUrl();if(t){e=`${e}&audience=${encodeURIComponent(t)}`}n.debug(`ID token url is ${e}`);const r=yield o.getCall(e);return n.setSecret(r),r}catch(e){throw new Error(`Error message: ${e.message}`)}}))}}return it.OidcClient=o,it}function Ot(){return bt||(bt=1,function(e){var t=C&&C.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&t(n,e,o);return r(n,e),n},o=C&&C.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getIDToken=e.getState=e.saveState=e.group=e.endGroup=e.startGroup=e.info=e.notice=e.warning=e.error=e.debug=e.isDebug=e.setFailed=e.setCommandEcho=e.setOutput=e.getBooleanInput=e.getMultilineInput=e.getInput=e.addPath=e.setSecret=e.exportVariable=e.ExitCode=void 0;const s=He,i=Ze,a=$e,u=n(y.default),l=n(b.default),c=wt();var d;function h(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&!1===t.trimWhitespace?r:r.trim()}function p(e,t={}){s.issueCommand("error",a.toCommandProperties(t),e instanceof Error?e.toString():e)}function f(e){s.issue("group",e)}function m(){s.issue("endgroup")}!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(d=e.ExitCode||(e.ExitCode={})),e.exportVariable=function(e,t){const r=a.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||""){const t="_GitHubActionsFileCommandDelimeter_",n=`${e}<<${t}${u.EOL}${r}${u.EOL}${t}`;i.issueCommand("ENV",n)}else s.issueCommand("set-env",{name:e},r)},e.setSecret=function(e){s.issueCommand("add-mask",{},e)},e.addPath=function(e){process.env.GITHUB_PATH||""?i.issueCommand("PATH",e):s.issueCommand("add-path",{},e),process.env.PATH=`${e}${l.delimiter}${process.env.PATH}`},e.getInput=h,e.getMultilineInput=function(e,t){return h(e,t).split("\n").filter((e=>""!==e))},e.getBooleanInput=function(e,t){const r=h(e,t);if(["true","True","TRUE"].includes(r))return!0;if(["false","False","FALSE"].includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\nSupport boolean input list: \`true | True | TRUE | false | False | FALSE\``)},e.setOutput=function(e,t){process.stdout.write(u.EOL),s.issueCommand("set-output",{name:e},t)},e.setCommandEcho=function(e){s.issue("echo",e?"on":"off")},e.setFailed=function(e){process.exitCode=d.Failure,p(e)},e.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},e.debug=function(e){s.issueCommand("debug",{},e)},e.error=p,e.warning=function(e,t={}){s.issueCommand("warning",a.toCommandProperties(t),e instanceof Error?e.toString():e)},e.notice=function(e,t={}){s.issueCommand("notice",a.toCommandProperties(t),e instanceof Error?e.toString():e)},e.info=function(e){process.stdout.write(e+u.EOL)},e.startGroup=f,e.endGroup=m,e.group=function(e,t){return o(this,void 0,void 0,(function*(){let r;f(e);try{r=yield t()}finally{m()}return r}))},e.saveState=function(e,t){s.issueCommand("save-state",{name:e},t)},e.getState=function(e){return process.env[`STATE_${e}`]||""},e.getIDToken=function(e){return o(this,void 0,void 0,(function*(){return yield c.OidcClient.getIDToken(e)}))}}(Fe)),Fe}var _t={exports:{}};!function(e,t){function r(e){if(!(this instanceof r))return new r(e);if(e||(e={}),!e.consumer)throw new Error("consumer option is required");if(this.consumer=e.consumer,this.nonce_length=e.nonce_length||32,this.version=e.version||"1.0",this.parameter_seperator=e.parameter_seperator||", ",this.realm=e.realm,void 0===e.last_ampersand?this.last_ampersand=!0:this.last_ampersand=e.last_ampersand,this.signature_method=e.signature_method||"PLAINTEXT","PLAINTEXT"!=this.signature_method||e.hash_function||(e.hash_function=function(e,t){return t}),!e.hash_function)throw new Error("hash_function option is required");this.hash_function=e.hash_function,this.body_hash_function=e.body_hash_function||this.hash_function}_t.exports=r,r.prototype.authorize=function(e,t){var r={oauth_consumer_key:this.consumer.key,oauth_nonce:this.getNonce(),oauth_signature_method:this.signature_method,oauth_timestamp:this.getTimeStamp(),oauth_version:this.version};return t||(t={}),void 0!==t.key&&(r.oauth_token=t.key),e.data||(e.data={}),e.includeBodyHash&&(r.oauth_body_hash=this.getBodyHash(e,t.secret)),r.oauth_signature=this.getSignature(e,t.secret,r),r},r.prototype.getSignature=function(e,t,r){return this.hash_function(this.getBaseString(e,r),this.getSigningKey(t))},r.prototype.getBodyHash=function(e,t){var r="string"==typeof e.data?e.data:JSON.stringify(e.data);if(!this.body_hash_function)throw new Error("body_hash_function option is required");return this.body_hash_function(r,this.getSigningKey(t))},r.prototype.getBaseString=function(e,t){return e.method.toUpperCase()+"&"+this.percentEncode(this.getBaseUrl(e.url))+"&"+this.percentEncode(this.getParameterString(e,t))},r.prototype.getParameterString=function(e,t){var r;r=t.oauth_body_hash?this.sortObject(this.percentEncodeData(this.mergeObject(t,this.deParamUrl(e.url)))):this.sortObject(this.percentEncodeData(this.mergeObject(t,this.mergeObject(e.data,this.deParamUrl(e.url)))));for(var n="",o=0;o<r.length;o++){var s=r[o].key,i=r[o].value;if(i&&Array.isArray(i)){i.sort();var a="";i.forEach(function(e,t){a+=s+"="+e,t<i.length&&(a+="&")}.bind(this)),n+=a}else n+=s+"="+i+"&"}return n=n.substr(0,n.length-1)},r.prototype.getSigningKey=function(e){return e=e||"",this.last_ampersand||e?this.percentEncode(this.consumer.secret)+"&"+this.percentEncode(e):this.percentEncode(this.consumer.secret)},r.prototype.getBaseUrl=function(e){return e.split("?")[0]},r.prototype.deParam=function(e){for(var t=e.split("&"),r={},n=0;n<t.length;n++){var o=t[n].split("=");o[1]=o[1]||"",r[o[0]]?(Array.isArray(r[o[0]])||(r[o[0]]=[r[o[0]]]),r[o[0]].push(decodeURIComponent(o[1]))):r[o[0]]=decodeURIComponent(o[1])}return r},r.prototype.deParamUrl=function(e){var t=e.split("?");return 1===t.length?{}:this.deParam(t[1])},r.prototype.percentEncode=function(e){return encodeURIComponent(e).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},r.prototype.percentEncodeData=function(e){var t={};for(var r in e){var n=e[r];if(n&&Array.isArray(n)){var o=[];n.forEach(function(e){o.push(this.percentEncode(e))}.bind(this)),n=o}else n=this.percentEncode(n);t[this.percentEncode(r)]=n}return t},r.prototype.toHeader=function(e){var t=this.sortObject(e),r="OAuth ";this.realm&&(r+='realm="'+this.realm+'"'+this.parameter_seperator);for(var n=0;n<t.length;n++)0===t[n].key.indexOf("oauth_")&&(r+=this.percentEncode(t[n].key)+'="'+this.percentEncode(t[n].value)+'"'+this.parameter_seperator);return{Authorization:r.substr(0,r.length-this.parameter_seperator.length)}},r.prototype.getNonce=function(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",r=0;r<this.nonce_length;r++)t+=e[parseInt(Math.random()*e.length,10)];return t},r.prototype.getTimeStamp=function(){return parseInt((new Date).getTime()/1e3,10)},r.prototype.mergeObject=function(e,t){t=t||{};var r=e=e||{};for(var n in t)r[n]=t[n];return r},r.prototype.sortObject=function(e){var t=Object.keys(e),r=[];t.sort();for(var n=0;n<t.length;n++){var o=t[n];r.push({key:o,value:e[o]})}return r}}();var Tt={exports:{}};const Et=E.default.Readable,At=Symbol("buffer"),xt=Symbol("type");class Ct{constructor(){this[xt]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,o=Number(t.length);for(let e=0;e<o;e++){const o=t[e];let s;s=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof Ct?o[At]:Buffer.from("string"==typeof o?o:String(o)),n+=s.length,r.push(s)}}this[At]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[xt]=o)}get size(){return this[At].length}get type(){return this[xt]}text(){return Promise.resolve(this[At].toString())}arrayBuffer(){const e=this[At],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new Et;return e._read=function(){},e.push(this[At]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,o;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const s=Math.max(o-n,0),i=this[At].slice(n,n+s),a=new Ct([],{type:arguments[2]});return a[At]=i,a}}function St(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let Pt;Object.defineProperties(Ct.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Ct.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),St.prototype=Object.create(Error.prototype),St.prototype.constructor=St,St.prototype.name="FetchError";try{Pt=require("encoding").convert}catch(hr){}const Nt=Symbol("Body internals"),kt=E.default.PassThrough;function jt(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size;let o=void 0===n?0:n;var s=r.timeout;let i=void 0===s?0:s;null==e?e=null:qt(e)?e=Buffer.from(e.toString()):It(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof E.default||(e=Buffer.from(String(e)))),this[Nt]={body:e,disturbed:!1,error:null},this.size=o,this.timeout=i,e instanceof E.default&&e.on("error",(function(e){const r="AbortError"===e.name?e:new St(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[Nt].error=r}))}function Rt(){var e=this;if(this[Nt].disturbed)return jt.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Nt].disturbed=!0,this[Nt].error)return jt.Promise.reject(this[Nt].error);let t=this.body;if(null===t)return jt.Promise.resolve(Buffer.alloc(0));if(It(t)&&(t=t.stream()),Buffer.isBuffer(t))return jt.Promise.resolve(t);if(!(t instanceof E.default))return jt.Promise.resolve(Buffer.alloc(0));let r=[],n=0,o=!1;return new jt.Promise((function(s,i){let a;e.timeout&&(a=setTimeout((function(){o=!0,i(new St(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(o=!0,i(t)):i(new St(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!o&&null!==t){if(e.size&&n+t.length>e.size)return o=!0,void i(new St(`content size at ${e.url} over limit: ${e.size}`,"max-size"));n+=t.length,r.push(t)}})),t.on("end",(function(){if(!o){clearTimeout(a);try{s(Buffer.concat(r,n))}catch(t){i(new St(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function qt(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function It(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function Bt(e){let t,r,n=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof E.default&&"function"!=typeof n.getBoundary&&(t=new kt,r=new kt,n.pipe(t),n.pipe(r),e[Nt].body=t,n=r),n}function Dt(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":qt(e)?"application/x-www-form-urlencoded;charset=UTF-8":It(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof E.default?null:"text/plain;charset=UTF-8"}function Ut(e){const t=e.body;return null===t?0:It(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}jt.prototype={get body(){return this[Nt].body},get bodyUsed(){return this[Nt].disturbed},arrayBuffer(){return Rt.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return Rt.call(this).then((function(t){return Object.assign(new Ct([],{type:e.toLowerCase()}),{[At]:t})}))},json(){var e=this;return Rt.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return jt.Promise.reject(new St(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return Rt.call(this).then((function(e){return e.toString()}))},buffer(){return Rt.call(this)},textConverted(){var e=this;return Rt.call(this).then((function(t){return function(e,t){if("function"!=typeof Pt)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,o,s="utf-8";r&&(n=/charset=([^;]*)/i.exec(r));o=e.slice(0,1024).toString(),!n&&o&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!n&&o&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),n||(n=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),n&&n.pop()),n&&(n=/charset=(.*)/i.exec(n.pop())));!n&&o&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));n&&(s=n.pop(),"gb2312"!==s&&"gbk"!==s||(s="gb18030"));return Pt(e,"UTF-8",s).toString()}(t,e.headers)}))}},Object.defineProperties(jt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),jt.mixIn=function(e){for(const t of Object.getOwnPropertyNames(jt.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(jt.prototype,t);Object.defineProperty(e,t,r)}},jt.Promise=global.Promise;const Mt=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Lt=/[^\t\x20-\x7e\x80-\xff]/;function Ft(e){if(e=`${e}`,Mt.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function Ht(e){if(e=`${e}`,Lt.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function $t(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const Vt=Symbol("map");class zt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[Vt]=Object.create(null),e instanceof zt){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){Ft(e=`${e}`);const t=$t(this[Vt],e);return void 0===t?null:this[Vt][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=Gt(this),n=0;for(;n<r.length;){var o=r[n];const s=o[0],i=o[1];e.call(t,i,s,this),r=Gt(this),n++}}set(e,t){t=`${t}`,Ft(e=`${e}`),Ht(t);const r=$t(this[Vt],e);this[Vt][void 0!==r?r:e]=[t]}append(e,t){t=`${t}`,Ft(e=`${e}`),Ht(t);const r=$t(this[Vt],e);void 0!==r?this[Vt][r].push(t):this[Vt][e]=[t]}has(e){return Ft(e=`${e}`),void 0!==$t(this[Vt],e)}delete(e){Ft(e=`${e}`);const t=$t(this[Vt],e);void 0!==t&&delete this[Vt][t]}raw(){return this[Vt]}keys(){return Kt(this,"key")}values(){return Kt(this,"value")}[Symbol.iterator](){return Kt(this,"key+value")}}function Gt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[Vt]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[Vt][t].join(", ")}:function(t){return[t.toLowerCase(),e[Vt][t].join(", ")]})}zt.prototype.entries=zt.prototype[Symbol.iterator],Object.defineProperty(zt.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(zt.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const Jt=Symbol("internal");function Kt(e,t){const r=Object.create(Wt);return r[Jt]={target:e,kind:t,index:0},r}const Wt=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==Wt)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[Jt];const t=e.target,r=e.kind,n=e.index,o=Gt(t,r);return n>=o.length?{value:void 0,done:!0}:(this[Jt].index=n+1,{value:o[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function Xt(e){const t=Object.assign({__proto__:null},e[Vt]),r=$t(e[Vt],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(Wt,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const Yt=Symbol("Response internals"),Zt=v.default.STATUS_CODES;class Qt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt.call(this,e,t);const r=t.status||200,n=new zt(t.headers);if(null!=e&&!n.has("Content-Type")){const t=Dt(e);t&&n.append("Content-Type",t)}this[Yt]={url:t.url,status:r,statusText:t.statusText||Zt[r],headers:n,counter:t.counter}}get url(){return this[Yt].url||""}get status(){return this[Yt].status}get ok(){return this[Yt].status>=200&&this[Yt].status<300}get redirected(){return this[Yt].counter>0}get statusText(){return this[Yt].statusText}get headers(){return this[Yt].headers}clone(){return new Qt(Bt(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}jt.mixIn(Qt.prototype),Object.defineProperties(Qt.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Qt.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const er=Symbol("Request internals"),tr=m.default.parse,rr=m.default.format,nr="destroy"in E.default.Readable.prototype;function or(e){return"object"==typeof e&&"object"==typeof e[er]}class sr{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};or(e)?t=tr(e.url):(t=e&&e.href?tr(e.href):tr(`${e}`),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||or(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=r.body?r.body:or(e)&&null!==e.body?Bt(e):null;jt.call(this,o,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const s=new zt(r.headers||e.headers||{});if(null!=o&&!s.has("Content-Type")){const e=Dt(o);e&&s.append("Content-Type",e)}let i=or(e)?e.signal:null;if("signal"in r&&(i=r.signal),null!=i&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(i))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[er]={method:n,redirect:r.redirect||e.redirect||"follow",headers:s,parsedURL:t,signal:i},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[er].method}get url(){return rr(this[er].parsedURL)}get headers(){return this[er].headers}get redirect(){return this[er].redirect}get signal(){return this[er].signal}clone(){return new sr(this)}}function ir(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}jt.mixIn(sr.prototype),Object.defineProperty(sr.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(sr.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),ir.prototype=Object.create(Error.prototype),ir.prototype.constructor=ir,ir.prototype.name="AbortError";const ar=E.default.PassThrough,ur=m.default.resolve;function lr(e,t){if(!lr.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return jt.Promise=lr.Promise,new lr.Promise((function(r,n){const o=new sr(e,t),s=function(e){const t=e[er].parsedURL,r=new zt(e[er].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof E.default.Readable&&!nr)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(n="0"),null!=e.body){const t=Ut(e);"number"==typeof t&&(n=String(t))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let o=e.agent;return"function"==typeof o&&(o=o(t)),r.has("Connection")||o||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:Xt(r),agent:o})}(o),i=("https:"===s.protocol?f.default:v.default).request,a=o.signal;let u=null;const l=function(){let e=new ir("The user aborted a request.");n(e),o.body&&o.body instanceof E.default.Readable&&o.body.destroy(e),u&&u.body&&u.body.emit("error",e)};if(a&&a.aborted)return void l();const c=function(){l(),p()},d=i(s);let h;function p(){d.abort(),a&&a.removeEventListener("abort",c),clearTimeout(h)}a&&a.addEventListener("abort",c),o.timeout&&d.once("socket",(function(e){h=setTimeout((function(){n(new St(`network timeout at: ${o.url}`,"request-timeout")),p()}),o.timeout)})),d.on("error",(function(e){n(new St(`request to ${o.url} failed, reason: ${e.message}`,"system",e)),p()})),d.on("response",(function(e){clearTimeout(h);const t=function(e){const t=new zt;for(const r of Object.keys(e))if(!Mt.test(r))if(Array.isArray(e[r]))for(const n of e[r])Lt.test(n)||(void 0===t[Vt][r]?t[Vt][r]=[n]:t[Vt][r].push(n));else Lt.test(e[r])||(t[Vt][r]=[e[r]]);return t}(e.headers);if(lr.isRedirect(e.statusCode)){const s=t.get("Location"),i=null===s?null:ur(o.url,s);switch(o.redirect){case"error":return n(new St(`uri requested responds with a redirect, redirect mode is set to error: ${o.url}`,"no-redirect")),void p();case"manual":if(null!==i)try{t.set("Location",i)}catch(e){n(e)}break;case"follow":if(null===i)break;if(o.counter>=o.follow)return n(new St(`maximum redirect reached at: ${o.url}`,"max-redirect")),void p();const s={headers:new zt(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body,signal:o.signal,timeout:o.timeout,size:o.size};return 303!==e.statusCode&&o.body&&null===Ut(o)?(n(new St("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void p()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),r(lr(new sr(i,s))),void p())}}e.once("end",(function(){a&&a.removeEventListener("abort",c)}));let s=e.pipe(new ar);const i={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:o.size,timeout:o.timeout,counter:o.counter},l=t.get("Content-Encoding");if(!o.compress||"HEAD"===o.method||null===l||204===e.statusCode||304===e.statusCode)return u=new Qt(s,i),void r(u);const d={flush:A.default.Z_SYNC_FLUSH,finishFlush:A.default.Z_SYNC_FLUSH};if("gzip"==l||"x-gzip"==l)return s=s.pipe(A.default.createGunzip(d)),u=new Qt(s,i),void r(u);if("deflate"!=l&&"x-deflate"!=l){if("br"==l&&"function"==typeof A.default.createBrotliDecompress)return s=s.pipe(A.default.createBrotliDecompress()),u=new Qt(s,i),void r(u);u=new Qt(s,i),r(u)}else{e.pipe(new ar).once("data",(function(e){s=8==(15&e[0])?s.pipe(A.default.createInflate()):s.pipe(A.default.createInflateRaw()),u=new Qt(s,i),r(u)}))}})),function(e,t){const r=t.body;null===r?e.end():It(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(d,o)}))}lr.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},lr.Promise=global.Promise;var cr=S(Object.freeze({__proto__:null,default:lr,Headers:zt,Request:sr,Response:Qt,FetchError:St}));!function(e,t){const r=cr,n=r.default||r,o=function(e,t){return/^\/\//.test(e)&&(e="https:"+e),n.call(this,e,t)};o.ponyfill=!0,e.exports=t=o,t.fetch=o,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,t.default=o}(Tt,Tt.exports);var dr=function(e){function t(){e.call(this),this.buffer=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.parse=function(e){var t,r;for(this.buffer+=e.toString("utf8");(t=this.buffer.indexOf("\r\n"))>-1;)if(r=this.buffer.slice(0,t),this.buffer=this.buffer.slice(t+2),r.length>0)try{r=JSON.parse(r),this.emit(r.event||"data",r)}catch(e){e.source=r,this.emit("error",e)}else this.emit("ping")},t}(O.default),hr=T.default,pr=_t.exports,fr=Tt.exports,mr=x.default,gr=dr,yr=function(e,t){return void 0===t&&(t="1.1"),"https://"+e+".twitter.com/"+t},br={subdomain:"api",consumer_key:null,consumer_secret:null,access_token_key:null,access_token_secret:null,bearer_token:null,version:"1.1",extension:!0},vr=["direct_messages/events/new","direct_messages/welcome_messages/new","direct_messages/welcome_messages/rules/new","media/metadata/create","collections/entries/curate"],wr={"Content-Type":"application/json",Accept:"application/json"};function Or(e){return e.replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}var _r=function(e){var t,r=Object.assign({},br,e);this.authType=r.bearer_token?"App":"User",this.client=pr({consumer:{key:(t={key:r.consumer_key,secret:r.consumer_secret}).key,secret:t.secret},signature_method:"HMAC-SHA1",hash_function:function(e,t){return hr.createHmac("sha1",t).update(e).digest("base64")}}),this.token={key:r.access_token_key,secret:r.access_token_secret},this.url=yr(r.subdomain,r.version),this.oauth=yr(r.subdomain,"oauth"),this.config=r};_r._handleResponse=function(e){try{var t=e.headers;return e.ok?204===e.status||"0"===e.headers.get("content-length")?Promise.resolve({_headers:t}):Promise.resolve(e.json().then((function(e){return e._headers=t,e}))):Promise.resolve(e.json()).then((function(e){throw Object.assign({},{_headers:t},e)}))}catch(e){return Promise.reject(e)}},_r._handleResponseTextOrJson=function(e){try{return Promise.resolve(e.text()).then((function(t){if(e.ok)return mr.parse(t);var r;try{r=JSON.parse(t)}catch(e){r=t}return Promise.reject(r)}))}catch(e){return Promise.reject(e)}},_r.prototype.getBearerToken=function(){try{var e={Authorization:"Basic "+Buffer.from(this.config.consumer_key+":"+this.config.consumer_secret).toString("base64"),"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"};return Promise.resolve(fr("https://api.twitter.com/oauth2/token",{method:"POST",body:"grant_type=client_credentials",headers:e}).then(_r._handleResponse))}catch(e){return Promise.reject(e)}},_r.prototype.getRequestToken=function(e){try{var t={url:this.oauth+"/request_token",method:"POST"},r={};e&&(r={oauth_callback:e}),r&&(t.url+="?"+mr.stringify(r));var n=this.client.toHeader(this.client.authorize(t,{}));return Promise.resolve(fr(t.url,{method:"POST",headers:Object.assign({},wr,n)}).then(_r._handleResponseTextOrJson))}catch(e){return Promise.reject(e)}},_r.prototype.getAccessToken=function(e){try{var t={url:this.oauth+"/access_token",method:"POST"},r={oauth_verifier:e.oauth_verifier,oauth_token:e.oauth_token};r.oauth_verifier&&r.oauth_token&&(t.url+="?"+mr.stringify(r));var n=this.client.toHeader(this.client.authorize(t));return Promise.resolve(fr(t.url,{method:"POST",headers:Object.assign({},wr,n)}).then(_r._handleResponseTextOrJson))}catch(e){return Promise.reject(e)}},_r.prototype._makeRequest=function(e,t,r){var n={url:this.url+"/"+t+(this.config.extension?".json":""),method:e};return r&&("POST"===e?n.data=r:n.url+="?"+mr.stringify(r)),{requestData:n,headers:"User"===this.authType?this.client.toHeader(this.client.authorize(n,this.token)):{Authorization:"Bearer "+this.config.bearer_token}}},_r.prototype.get=function(e,t){var r=this._makeRequest("GET",e,t);return fr(r.requestData.url,{headers:r.headers}).then(_r._handleResponse)},_r.prototype.post=function(e,t){var r=this._makeRequest("POST",e,vr.includes(e)?null:t),n=r.requestData,o=Object.assign({},wr,r.headers);return vr.includes(e)?t=JSON.stringify(t):(t=Or(mr.stringify(t)),o["Content-Type"]="application/x-www-form-urlencoded"),fr(n.url,{method:"POST",headers:o,body:t}).then(_r._handleResponse)},_r.prototype.put=function(e,t,r){var n=this._makeRequest("PUT",e,t),o=n.requestData,s=Object.assign({},wr,n.headers);return r=JSON.stringify(r),fr(o.url,{method:"PUT",headers:s,body:r}).then(_r._handleResponse)},_r.prototype.stream=function(e,t){var r=this;if("User"!==this.authType)throw new Error("Streams require user context authentication");var n=new gr,o={url:yr("stream")+"/"+e+(this.config.extension?".json":""),method:"POST"};t&&(o.data=t);var s=this.client.toHeader(this.client.authorize(o,this.token));return fr(o.url,{method:"POST",headers:Object.assign({},s,{"Content-Type":"application/x-www-form-urlencoded"}),body:Or(mr.stringify(t))}).then((function(e){n.destroy=r.stream.destroy=function(){return e.body.destroy()},e.ok?n.emit("start",e):(e._headers=e.headers,n.emit("error",e)),e.body.on("data",(function(e){return n.parse(e)})).on("error",(function(e){return n.emit("error",e)})).on("end",(function(){return n.emit("end",e)}))})).catch((function(e){return n.emit("error",e)})),n};const Tr=f.default,{URL:Er}=m.default;g.default.promises;const Ar=P,xr=Ot(),Cr=__dirname+"/../tmp/header.png";process.env.TWITTER_API_KEY,process.env.TWITTER_API_SECRET,process.env.TWITTER_ACCESS_TOKEN,process.env.TWITTER_ACCESS_SECRET;const Sr=xr.getInput("BLOG_RSS"),Pr=Number.parseInt(xr.getInput("MAX_TEXT_LENGTH")||"40"),Nr=Number.parseInt(xr.getInput("BLOG_POSTS_AMOUNT")||"3"),kr=Number.parseInt(xr.getInput("DRAW_BLOGTITLES_X")||"835"),jr=Number.parseInt(xr.getInput("DRAW_BLOGTITLES_Y")||"150"),Rr=Number.parseInt(xr.getInput("DRAW_BLOGTITLES_LINEHEIGHT")||"55"),qr=xr.getInput("DRAW_BACKGROUNDCOLOR")||"#00252d",Ir=xr.getInput("DRAW_TEXTS")||'[\n\t["h1", "Hey, I\'m Simon", 125, 100],\n\t["h1", "My latest blog posts", 835, 70],\n\t["h1", "Follow   and say hi!", 545, 390],\n\t["p", "I tweet about webperf, javascript,", 125, 177],\n  ["p", "my learnings and books.", 125, 212]\n]',Br=xr.getInput("DRAW_IMAGES")||'[\n\t["./assets/images/underscore.png", 310, 145],\n\t["./assets/images/bullets.png", 725, 132],\n\t["./assets/images/curl.png", 505, 350]\n]';(async function(e,t=Nr){if(!e)throw"no valid BLOG_RSS";const{host:r,pathname:n}=new Er(e);return(await new Promise(((e,t)=>{Tr.request({host:r,path:n},(r=>{let n="";r.on("data",(e=>n+=e)),r.on("end",(()=>e(Ar.parse(n)))),r.on("error",(e=>t(e)))})).end()}))).rss.channel.item.slice(0,t).map((e=>e.title))})(Sr).then((e=>async function(e,t=Cr){const{default:r}=await Promise.resolve().then((function(){return require("./index3.js")})).then((function(e){return e.index})),n=new r(1500,500,qr),o=await r.loadFont(__dirname+"/../assets/fonts/IBMPlexSans-Bold.ttf.fnt"),s=await r.loadFont(__dirname+"/../assets/fonts/Lato-Regular.ttf.fnt");JSON.parse(Ir).forEach((e=>{const[t,r,i,a]=e,u="h1"===t?o:s;n.print(u,i,a,r)})),e.forEach(((e,t)=>{const r=e.length>Pr?e.slice(0,Pr).trim()+"...":e;n.print(s,kr,jr+Rr*t,r)}));const i=JSON.parse(Br).map((async e=>{const[t,o,s]=e,i=await r.read(t.startsWith("./")?`${__dirname}/../${t.slice(1)}`:t);n.composite(i,o,s)}));return await Promise.all(i),n.write(t),t}(e))).catch((e=>xr.setFailed(e))),exports.commonjsGlobal=C,exports.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e},exports.src={};
